<!DOCTYPE html>
<html lang="en">
<head>
    <title>정표</title>

    <style>
        .area {
            height: auto;
            background-color: cornflowerblue;
            border: 1px darkcyan;
            color: mediumaquamarine;
        }

    </style>
</head>
<body>
    
    <h1>정규표현식</h1>

    <p>
        정규표현식(Regular Expression : REGEX / REGEXP)이란, <br>
        특정 패턴을 가진 문자열을 찾거나 또는 찾아서 변경할 때 사용하는 형식 언어 <br />
        정규표현식을 사용하면 특정 조건검사를 하거나 변경할 때 if문이나 for문을 사용하지 않고
        간단하게 처리할 수 있음 <br /> 
        자바스크립트 뿐만 아니라 자바/오라클에서도 사용할 수 있음 <br />
        String클래스 ==> mathes()
    </p>

    <hr>

    <div id="area1" class="area"></div>
    <button onclick="test1();">에밋문법은 신이다</button>

    <script>

        function test1() {

            // 정규표현식 사용하는 방법
            // 1. 정규식 객체 만들기

            let regExp = new RegExp("kh"); // 방법1
            regExp = /kh/; // 방법2
            // 검색조건으로 삼고자하는 문자열 또는 패턴 제시

            // 2. 정규표현식을 이용해서 메소드를 호출
            /*
                정규표현식객체가 제공하는 메소드들 => 정규객체.메소드명(패턴);
                - test(문자열) : 문자열에서 정규식 값과 일치하는 값이 있다면 true / 없다면 false
                - exec(문자열) : 문자열에서 정규식 값과 일치하는 값이 있다면 처음 매칭된 문자열 반환 
                                 / 없다면 null값을 반환
                
                String객체에서 제공하는 메소드 => 문자열.메소드(정규객체);
                - match(정규식)  : 문자열에서 정규식 값과 "일치하는 값"을 반환
                - search(정규식) : 문자열에서 정규식 값과 "일치하는 시작 인덱스"를 반환
                                   / 없다면 -1을 반환
                - replace(정규식, 바꿀값) : 문자열에서 정규식 값과 일치하는 첫 번째 값을 바꿀값으로
                                            변경해서 반환
            */

            // 비교할 문자열
            const str1 = "samsung lg google kh apple amazon";
            const area = document.getElementById("area1");

            area.innerHTML += `regExp.test(str1) : ${regExp.test(str1)} <br> 
                               ${regExp.test("sdfsdfsdf")} `;
        }

    </script>

    <hr>

    <h2>* 메타문자</h2>

    <p>
        메타문자를 사용해서 "검색조건으로 삼을 패턴"을 만들 수 있음 <br />
        => test() 통해 검사하거나 replace()을 이용해서 치환
    </p>

    <button onclick="test2();">실행</button>
    <div id="area2" class="area"></div>

    <script>

        function test2() {

            const area = document.getElementById("area2");

            let regExp = /a/;

            // 비교할 문자열
            const str = "javascript jquery ajax";

            area.innerHTML += `/a/ : ${regExp.test(str)} <br>
                               /a/ : ${str.replace(regExp, '*')} <br>`;

            // 메타문자
            // 1. ^ : 시작을 의미 => ^= 해당값으로 "시작"하는 경우
            regExp = /^j/; // 문자열이 소문자 j로 "시작"하는 경우

            area.innerHTML += `/^j/ : ${regExp.test(str)} <br>
                               /^j/ : ${regExp.test("gsdfaedsg")} <br>`;
            // if(str.chatAt(0) === 'j')

            // 2. [] : []안에 있는 문자 중 하나라도 존재할 경우
            regExp = /[abc]/; // 문자열 중 a또는 b또는 c가 하나라도 존재할 경우

            area.innerHTML += `/[abc]/ : ${regExp.test(str)} <br>
                               /[abc]/ : ${regExp.test("pwuwerjpds")} <br>`;

            // 문자열의 시작 문자가 j또는 s또는 a인가
            // if(str.chatAt(0) === 'j' || str.charAt(0) === 's' || str.charAt(0) === 'A')
            regExp = /^[jsa]/;

            area.innerHTML += `/^[jsa]/ : ${regExp.test(str)} <br>`;

            // 3. $ : 끝을 의미
            regExp = /x$/;
            area.innerHTML += `/x$/ : ${regExp.test(str)} <br>`;

            // 시작은 j로 시작하고 끝글자는 x인지
            regExp = /^jx$/;
            area.innerHTML += `/^jx$/ : ${regExp.test(str)} <br> 
                               /^jx$/ : ${regExp.test("jx")} <br>`;

            // 4. . : 개행문자를 제외한 모든 문자를 의미(영어, 숫자, 한글, 특문..)
            // 5. + : 한 글자 이상을 의미(0글자 X)

            // 시작부터 끝까지 오로지 숫자값으로만 이루어져 있는가

            regExp = /^[0123456789]+$/; // 숫자의 개수는 상관없음
                                        // 무조건 1글자 이상이어야 패턴 만족
            regExp = /^[0-9]+$/;
            area.innerHTML += `/^[0-9]+$/ : ${regExp.test("324235643674")} <br>
                               /^[0-9]+$/ : ${regExp.test("1,000")} <br>`;

            // a부터 z까지 A부터 Z까지

            regExp = /^[a-zA-Z]+$/;
            // 문자열의 길이는 상관없음 최소한 한 글자 이상이어야 하고
            // 시작부터 끝까지 오로지 영문자(대문자, 소문자)로만 이루어진 패턴

            // 영문자, 숫자로만 입력하세요
            regExp = /^[a-zA-Z0-9]+$/;
            area.innerHTML += `/^[a-zA-Z0-9]+$/ : ${regExp.test("sdf533")}<br>
                               /^[a-zA-Z0-9]+$/ : ${regExp.test("sdfs한sdkf")}<br>`;

            // 시작부터 끝까지 오로지 한글(자음, 모음, 결합)으로만 이루어진 경우
            regExp = /^[ㄱ-ㅎㅏ-ㅣ가-힣]+$/;
        area.innerHTML += `/^[ㄱ-ㅎㅏ-ㅣ가-힣]+$/ : ${regExp.test("ㄴ어핳훟쀍")}`;
        }
    </script>

    <hr>

    <h3>* 플래그 문자</h3>

    <p>
        /정규표현식/ 뒤에 써줌

        종류 <br>
        i : 대/소문자 전부 보겠다
        g : 문자열 내의 모든 패턴검사(전역으로 보겠다)
        m : 여러 줄 비교를 수행하겠다
    </p>

    <button onclick="test3();">빠른</button>

    <script>

        function test3() {
            // 비교할 문자열
            const str = "JavaScript jQuery AJAX";

            // 정규표현식 객체
            let regExp = /a/;
            console.log(str.replace(regExp, "ㅋㅋㅋ"));

            regExp = /a/g;
            console.log(str.replace(regExp, "ㅋㅋㅋ"));

            regExp = /a/gi;
            console.log(str.replace(regExp, "ㅋㅋㅋ"));
        }
    </script>

    <hr>

    <h3>* 정규표현식을 이용해서 주민번호 확인</h3>

    주민번호 : <input type="text" id="pno" />
    <button onclick="test4();">확인</button>

    <script>

        function test4() {

            const value = document.getElementById("pno").value;

            // 생년월일-성별지역순서랜덤값
            // 6-7
            
            // 1단계 : 6글자 - 7글자
            // . : 개행문자를 제외한 모든 문자 중 1개
            let regExp = /^......-.......$/; //글자수 체크 패턴
    
            // 2단계 : 숫자여야함
            regExp = /^[0-9][0-9][0-9][0-9][0-9][0-9]-[0-9][0-9][0-9][0-9][0-9][0-9][0-9]$/;

            /*
                * 메타문자

                \d : 숫자 (==[0-9])
                \D : 숫자를 제외한 모든 문자
                \w : 영문자, 숫자, _(==[a-zA-Z0-9])
                \W : 영문자, 숫자, _를 제외한 모든 문자
                \s : 공백문자만(스페이스, 탭, 개행문자)
                \S : 공백문자를 제외한 모든 문자
            */

            regExp = /^\d\d\d\d\d\d-[1-4]\d\d\d\d\d\d\d$/;
            /*
                * 수량문자
                + : 최소한 한 글자 이상
                * : 0글자 이상(0글자 가능)
                ? : 0글자 또는 1글자(2글자 이상은 불가능)

                {6} : 6글자
                {2,5} : 2글자 이상 5글자 이하
                {2,} : 2글자 이상
                {,5} : 5글자 이하
            */
           regExp = /^\d{6}-[1-4]\d{7}$/;

           // 3단계. 생년월일
           /*
                - 생년(두자리) : \d{2}
                - 월(두자리) : 앞자리가 0일 경우 뒷자리가 1 ~ 9까지 가능
                               앞자리가 1일 경우 뒷자리가 0 ~ 2까지 가능
                그룹핑(경우1|경우2)
                \d{2}   (0[1-9]|1[0-2])     
                - 일(두자리) : 앞자리가 0일 경우 뒷자리가 1 ~ 9까지 가능
                               앞자리가 1/2일 경우 뒷자리가 0 ~ 9까지 가능
                               앞자리가 3일 경우 뒷자리가 0 ~ 1까지 가능
                \d{2}   (0[1-9]|1[0-2])   (0[1-9]|[1-2][0-9]|3[0-1])
           */
            regExp = /^\d{2}(0[1-9]|1[0-2])(0[1-9]|[1-2][0-9]|3[0-1])-[1-4]\d{7}$/;
        };
    </script>


</body>
</html>